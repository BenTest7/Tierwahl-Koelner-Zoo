<!doctype html>
<html lang="de">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>KÃ¶lner Zoo â€“ Auto-Hotspots (2 Bildschirme)</title>
<style>
  :root{--bg:#0b1220;--panel:rgba(10,16,28,.55);--text:#e8edf7;--border:rgba(255,255,255,.14);--red:#ef4444;--green:#22c55e;}
  html,body{height:100%;margin:0;background:var(--bg);font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;}
  .stage{height:100%;display:flex;align-items:center;justify-content:center;padding:10px;}
  .frame{position:relative;width:min(1800px,100%);height:100%;background:#0f172a;border:1px solid var(--border);border-radius:16px;overflow:hidden;}
  svg{position:absolute;inset:0;width:100%;height:100%;}
  .hud{position:absolute;top:12px;right:12px;display:flex;gap:8px;z-index:6;}
  .hud button{border:1px solid rgba(255,255,255,.14);background:var(--panel);color:var(--text);padding:8px 10px;border-radius:999px;cursor:pointer;font-weight:650;font-size:12.5px;}
  .hs{fill:rgba(0,0,0,0);stroke-width:.75;cursor:pointer;}
  .hs.off{stroke:var(--red);}
  .hs.on{stroke:var(--green);}
  body.audience .hs{display:none;}
  body.audience .hud{display:none;}
</style>
</head>
<body>
<div class="stage"><div class="frame">
  <div class="hud">
    <button id="btnOpen">Publikumsansicht Ã¶ffnen</button>
    <button id="btnAll">Alle anzeigen</button>
    <button id="btnNone">Alle lÃ¶schen</button>
    <button id="btnReset">Reset</button>
  </div>
  <svg id="svg" viewBox="0 0 100 100" preserveAspectRatio="none">
    <image href="zoo_blank_clean4_HD.png" x="0" y="0" width="100" height="100" preserveAspectRatio="none"></image>
    <defs id="defs"></defs>
    <g id="reveals"></g>
    <g id="hotspots"></g>
  </svg>
</div></div>

<script>
const animalsImageHref="zoo_animals_hd2.jpg";
const HOTSPOTS=[{"id": "h58", "name": "Tier 26", "emoji": "ðŸ¾", "x": 86.229, "y": 23.27, "r": 6.323}, {"id": "h350", "name": "Tier 82", "emoji": "ðŸ¾", "x": 15.958, "y": 81.895, "r": 4.401}, {"id": "h265", "name": "Tier 69", "emoji": "ðŸ¾", "x": 10.971, "y": 61.982, "r": 3.492}, {"id": "h299", "name": "Tier 72", "emoji": "ðŸ¾", "x": 16.485, "y": 67.886, "r": 2.991}, {"id": "h124", "name": "Tier 36", "emoji": "ðŸ¾", "x": 83.904, "y": 31.601, "r": 2.468}, {"id": "h57", "name": "Tier 25", "emoji": "ðŸ¾", "x": 73.053, "y": 18.611, "r": 2.366}, {"id": "h261", "name": "Tier 68", "emoji": "ðŸ¾", "x": 31.09, "y": 61.207, "r": 2.366}, {"id": "h342", "name": "Tier 81", "emoji": "ðŸ¾", "x": 62.89, "y": 80.233, "r": 2.332}, {"id": "h357", "name": "Tier 86", "emoji": "ðŸ¾", "x": 86.224, "y": 85.028, "r": 2.195}, {"id": "h3", "name": "Tier 2", "emoji": "ðŸ¾", "x": 90.448, "y": 5.136, "r": 2.024}, {"id": "h53", "name": "Tier 24", "emoji": "ðŸ¾", "x": 88.425, "y": 14.748, "r": 1.945}, {"id": "h52", "name": "Tier 23", "emoji": "ðŸ¾", "x": 84.743, "y": 14.782, "r": 1.808}, {"id": "h137", "name": "Tier 44", "emoji": "ðŸ¾", "x": 85.202, "y": 34.364, "r": 1.774}, {"id": "h332", "name": "Tier 78", "emoji": "ðŸ¾", "x": 12.684, "y": 77.74, "r": 1.763}, {"id": "h255", "name": "Tier 66", "emoji": "ðŸ¾", "x": 10.067, "y": 58.726, "r": 1.672}, {"id": "h221", "name": "Tier 60", "emoji": "ðŸ¾", "x": 84.49, "y": 51.127, "r": 1.535}, {"id": "h72", "name": "Tier 28", "emoji": "ðŸ¾", "x": 86.744, "y": 24.044, "r": 1.524}, {"id": "h307", "name": "Tier 73", "emoji": "ðŸ¾", "x": 22.683, "y": 68.095, "r": 1.524}, {"id": "h17", "name": "Tier 6", "emoji": "ðŸ¾", "x": 81.776, "y": 9.415, "r": 1.353}, {"id": "h18", "name": "Tier 7", "emoji": "ðŸ¾", "x": 84.557, "y": 9.41, "r": 1.353}, {"id": "h40", "name": "Tier 17", "emoji": "ðŸ¾", "x": 84.562, "y": 12.249, "r": 1.353}, {"id": "h42", "name": "Tier 18", "emoji": "ðŸ¾", "x": 81.775, "y": 12.246, "r": 1.353}, {"id": "h146", "name": "Tier 49", "emoji": "ðŸ¾", "x": 83.25, "y": 36.902, "r": 1.319}, {"id": "h150", "name": "Tier 53", "emoji": "ðŸ¾", "x": 85.859, "y": 37.004, "r": 1.308}, {"id": "h148", "name": "Tier 51", "emoji": "ðŸ¾", "x": 90.665, "y": 37.001, "r": 1.274}, {"id": "h128", "name": "Tier 40", "emoji": "ðŸ¾", "x": 91.278, "y": 31.673, "r": 1.251}, {"id": "h135", "name": "Tier 42", "emoji": "ðŸ¾", "x": 89.23, "y": 34.345, "r": 1.24}, {"id": "h1", "name": "Tier 1", "emoji": "ðŸ¾", "x": 88.117, "y": 4.972, "r": 1.2}, {"id": "h6", "name": "Tier 3", "emoji": "ðŸ¾", "x": 26.566, "y": 6.894, "r": 1.2}, {"id": "h8", "name": "Tier 4", "emoji": "ðŸ¾", "x": 25.55, "y": 7.018, "r": 1.2}, {"id": "h16", "name": "Tier 5", "emoji": "ðŸ¾", "x": 79.196, "y": 9.058, "r": 1.2}, {"id": "h19", "name": "Tier 8", "emoji": "ðŸ¾", "x": 87.389, "y": 9.153, "r": 1.2}, {"id": "h23", "name": "Tier 9", "emoji": "ðŸ¾", "x": 88.955, "y": 9.147, "r": 1.2}, {"id": "h25", "name": "Tier 10", "emoji": "ðŸ¾", "x": 94.891, "y": 10.004, "r": 1.2}, {"id": "h26", "name": "Tier 11", "emoji": "ðŸ¾", "x": 92.147, "y": 10.211, "r": 1.2}, {"id": "h29", "name": "Tier 12", "emoji": "ðŸ¾", "x": 90.954, "y": 10.579, "r": 1.2}, {"id": "h30", "name": "Tier 13", "emoji": "ðŸ¾", "x": 79.45, "y": 10.86, "r": 1.2}, {"id": "h32", "name": "Tier 14", "emoji": "ðŸ¾", "x": 87.549, "y": 10.904, "r": 1.2}, {"id": "h34", "name": "Tier 15", "emoji": "ðŸ¾", "x": 92.873, "y": 11.862, "r": 1.2}, {"id": "h39", "name": "Tier 16", "emoji": "ðŸ¾", "x": 91.445, "y": 11.555, "r": 1.2}, {"id": "h44", "name": "Tier 19", "emoji": "ðŸ¾", "x": 90.626, "y": 12.029, "r": 1.2}, {"id": "h47", "name": "Tier 20", "emoji": "ðŸ¾", "x": 89.894, "y": 12.563, "r": 1.2}, {"id": "h49", "name": "Tier 21", "emoji": "ðŸ¾", "x": 79.983, "y": 12.5, "r": 1.2}, {"id": "h50", "name": "Tier 22", "emoji": "ðŸ¾", "x": 86.456, "y": 12.423, "r": 1.2}, {"id": "h70", "name": "Tier 27", "emoji": "ðŸ¾", "x": 9.813, "y": 21.717, "r": 1.2}, {"id": "h73", "name": "Tier 29", "emoji": "ðŸ¾", "x": 91.404, "y": 23.219, "r": 1.2}, {"id": "h82", "name": "Tier 30", "emoji": "ðŸ¾", "x": 27.064, "y": 24.485, "r": 1.2}, {"id": "h91", "name": "Tier 31", "emoji": "ðŸ¾", "x": 28.323, "y": 25.35, "r": 1.2}, {"id": "h101", "name": "Tier 32", "emoji": "ðŸ¾", "x": 90.796, "y": 27.2, "r": 1.2}, {"id": "h103", "name": "Tier 33", "emoji": "ðŸ¾", "x": 27.491, "y": 26.63, "r": 1.2}, {"id": "h106", "name": "Tier 34", "emoji": "ðŸ¾", "x": 85.72, "y": 26.873, "r": 1.2}, {"id": "h123", "name": "Tier 35", "emoji": "ðŸ¾", "x": 80.961, "y": 31.675, "r": 1.2}, {"id": "h125", "name": "Tier 37", "emoji": "ðŸ¾", "x": 86.637, "y": 31.828, "r": 1.2}, {"id": "h126", "name": "Tier 38", "emoji": "ðŸ¾", "x": 87.988, "y": 31.684, "r": 1.2}, {"id": "h127", "name": "Tier 39", "emoji": "ðŸ¾", "x": 89.387, "y": 31.68, "r": 1.2}, {"id": "h131", "name": "Tier 41", "emoji": "ðŸ¾", "x": 92.915, "y": 32.472, "r": 1.2}, {"id": "h136", "name": "Tier 43", "emoji": "ðŸ¾", "x": 83.015, "y": 34.347, "r": 1.2}, {"id": "h138", "name": "Tier 45", "emoji": "ðŸ¾", "x": 87.471, "y": 34.353, "r": 1.2}, {"id": "h140", "name": "Tier 46", "emoji": "ðŸ¾", "x": 51.753, "y": 34.954, "r": 1.2}, {"id": "h142", "name": "Tier 47", "emoji": "ðŸ¾", "x": 90.862, "y": 35.134, "r": 1.2}, {"id": "h143", "name": "Tier 48", "emoji": "ðŸ¾", "x": 53.081, "y": 35.037, "r": 1.2}, {"id": "h147", "name": "Tier 50", "emoji": "ðŸ¾", "x": 87.589, "y": 37.008, "r": 1.2}, {"id": "h149", "name": "Tier 52", "emoji": "ðŸ¾", "x": 81.559, "y": 37.005, "r": 1.2}, {"id": "h151", "name": "Tier 54", "emoji": "ðŸ¾", "x": 88.838, "y": 37.007, "r": 1.2}, {"id": "h152", "name": "Tier 55", "emoji": "ðŸ¾", "x": 92.312, "y": 36.979, "r": 1.2}, {"id": "h156", "name": "Tier 56", "emoji": "ðŸ¾", "x": 12.792, "y": 38.595, "r": 1.2}, {"id": "h171", "name": "Tier 57", "emoji": "ðŸ¾", "x": 42.025, "y": 43.342, "r": 1.2}, {"id": "h193", "name": "Tier 58", "emoji": "ðŸ¾", "x": 36.226, "y": 46.891, "r": 1.2}, {"id": "h205", "name": "Tier 59", "emoji": "ðŸ¾", "x": 24.02, "y": 47.979, "r": 1.2}, {"id": "h222", "name": "Tier 61", "emoji": "ðŸ¾", "x": 56.857, "y": 50.934, "r": 1.2}, {"id": "h233", "name": "Tier 62", "emoji": "ðŸ¾", "x": 86.137, "y": 52.075, "r": 1.2}, {"id": "h234", "name": "Tier 63", "emoji": "ðŸ¾", "x": 38.061, "y": 52.238, "r": 1.2}, {"id": "h241", "name": "Tier 64", "emoji": "ðŸ¾", "x": 62.768, "y": 53.732, "r": 1.2}, {"id": "h243", "name": "Tier 65", "emoji": "ðŸ¾", "x": 38.523, "y": 54.298, "r": 1.2}, {"id": "h260", "name": "Tier 67", "emoji": "ðŸ¾", "x": 45.376, "y": 59.776, "r": 1.2}, {"id": "h281", "name": "Tier 70", "emoji": "ðŸ¾", "x": 90.926, "y": 63.237, "r": 1.2}, {"id": "h285", "name": "Tier 71", "emoji": "ðŸ¾", "x": 48.366, "y": 63.784, "r": 1.2}, {"id": "h316", "name": "Tier 74", "emoji": "ðŸ¾", "x": 79.784, "y": 72.914, "r": 1.2}, {"id": "h320", "name": "Tier 75", "emoji": "ðŸ¾", "x": 78.319, "y": 73.318, "r": 1.2}, {"id": "h322", "name": "Tier 76", "emoji": "ðŸ¾", "x": 19.433, "y": 73.933, "r": 1.2}, {"id": "h327", "name": "Tier 77", "emoji": "ðŸ¾", "x": 11.946, "y": 75.103, "r": 1.2}, {"id": "h333", "name": "Tier 79", "emoji": "ðŸ¾", "x": 91.995, "y": 77.337, "r": 1.2}, {"id": "h334", "name": "Tier 80", "emoji": "ðŸ¾", "x": 19.549, "y": 77.275, "r": 1.2}, {"id": "h351", "name": "Tier 83", "emoji": "ðŸ¾", "x": 67.912, "y": 80.951, "r": 1.2}, {"id": "h352", "name": "Tier 84", "emoji": "ðŸ¾", "x": 68.91, "y": 81.225, "r": 1.2}, {"id": "h354", "name": "Tier 85", "emoji": "ðŸ¾", "x": 87.244, "y": 81.716, "r": 1.2}, {"id": "h358", "name": "Tier 87", "emoji": "ðŸ¾", "x": 89.929, "y": 82.759, "r": 1.2}, {"id": "h360", "name": "Tier 88", "emoji": "ðŸ¾", "x": 65.296, "y": 83.76, "r": 1.2}, {"id": "h369", "name": "Tier 89", "emoji": "ðŸ¾", "x": 87.579, "y": 85.219, "r": 1.2}, {"id": "h370", "name": "Tier 90", "emoji": "ðŸ¾", "x": 88.927, "y": 85.201, "r": 1.2}, {"id": "h374", "name": "Tier 91", "emoji": "ðŸ¾", "x": 73.039, "y": 85.405, "r": 1.2}, {"id": "h387", "name": "Tier 92", "emoji": "ðŸ¾", "x": 85.617, "y": 88.517, "r": 1.2}, {"id": "h388", "name": "Tier 93", "emoji": "ðŸ¾", "x": 69.007, "y": 88.239, "r": 1.2}, {"id": "h392", "name": "Tier 94", "emoji": "ðŸ¾", "x": 87.679, "y": 89.005, "r": 1.2}, {"id": "h397", "name": "Tier 95", "emoji": "ðŸ¾", "x": 85.88, "y": 89.659, "r": 1.2}, {"id": "h399", "name": "Tier 96", "emoji": "ðŸ¾", "x": 84.086, "y": 91.056, "r": 1.2}, {"id": "h400", "name": "Tier 97", "emoji": "ðŸ¾", "x": 72.121, "y": 91.313, "r": 1.2}, {"id": "h401", "name": "Tier 98", "emoji": "ðŸ¾", "x": 73.101, "y": 91.871, "r": 1.2}, {"id": "h403", "name": "Tier 99", "emoji": "ðŸ¾", "x": 80.592, "y": 93.35, "r": 1.2}, {"id": "h406", "name": "Tier 100", "emoji": "ðŸ¾", "x": 79.694, "y": 93.927, "r": 1.2}];
const STATE_KEY="zoo_state_auto_v1";
const CHANNEL="zoo-sync-auto-v1";

const params=new URLSearchParams(location.search);
const isAudience=params.get("audience")==="1";
document.body.classList.toggle("audience",isAudience);

let visible=JSON.parse(localStorage.getItem(STATE_KEY)||"{}");
HOTSPOTS.forEach(h=>{ if(visible[h.id]===undefined) visible[h.id]=false; });

const defs=document.getElementById("defs");
const reveals=document.getElementById("reveals");
const hsLayer=document.getElementById("hotspots");

function el(tag,a){const e=document.createElementNS("http://www.w3.org/2000/svg",tag);for(const k in a)e.setAttribute(k,a[k]);return e;}

function render(){
  defs.innerHTML="";reveals.innerHTML="";hsLayer.innerHTML="";
  HOTSPOTS.forEach(h=>{
    const on=!!visible[h.id];
    const clip="c_"+h.id;
    const cp=el("clipPath",{id:clip});
    cp.appendChild(el("circle",{cx:h.x,cy:h.y,r:h.r}));
    defs.appendChild(cp);

    if(on){
      const g=el("g",{"clip-path":"url(#"+clip+")"});
      g.appendChild(el("image",{href:animalsImageHref,x:0,y:0,width:100,height:100,preserveAspectRatio:"none"}));
      reveals.appendChild(g);
    }

    if(!isAudience){
      const c=el("circle",{cx:h.x,cy:h.y,r:h.r,class:"hs "+(on?"on":"off")});
      c.appendChild(el("title",{})).textContent=h.name;
      c.onclick=()=>toggle(h.id);
      hsLayer.appendChild(c);
    }
  });
}

function toggle(id){ visible[id]=!visible[id]; sync(); }
function sync(){ localStorage.setItem(STATE_KEY,JSON.stringify(visible)); if(bc) bc.postMessage(visible); render(); }

let bc=null;
try{ bc=new BroadcastChannel(CHANNEL); bc.onmessage=e=>{ visible=e.data||{}; render(); }; }catch(e){}
window.addEventListener("storage",e=>{ if(e.key===STATE_KEY){ try{ visible=JSON.parse(e.newValue||"{}"); }catch(_){} render(); } });

document.getElementById("btnOpen").onclick=()=>{ const u=new URL(location.href);u.searchParams.set("audience","1"); window.open(u,"audience"); };
document.getElementById("btnAll").onclick=()=>{ HOTSPOTS.forEach(h=>visible[h.id]=true); sync(); };
document.getElementById("btnNone").onclick=()=>{ HOTSPOTS.forEach(h=>visible[h.id]=false); sync(); };
document.getElementById("btnReset").onclick=()=>{ visible={}; HOTSPOTS.forEach(h=>visible[h.id]=false); sync(); };

render();
</script>
</body>
</html>
